{% extends "base.html" %}

{% block title %}Set Up Payment Method{% endblock title %}

{% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="mx-auto max-w-lg">
    <h1 class="mb-4 text-2xl font-bold">Set Up Payment Method</h1>

    <div class="border-border bg-background rounded-lg border p-6">
      <!-- eslint-disable-next-line html/require-form-method -->
      <form id="payment-form">
        <div class="mb-4">
          <label class="mb-2 block text-sm font-medium" for="card-element">
            Credit or debit card
          </label>
          <div id="card-element" class="border-border/70 rounded-md border p-3 duration-200 hover:border-border">
            <!-- Stripe Elements will create form elements here -->
          </div>
          <div id="card-errors" class="text-destructive mt-2 text-sm" role="alert"></div>
        </div>

        <div class="mt-6 flex justify-between">
          <button id="submit-button" type="submit" class="button-primary items-center justify-center">
            <i id="spinner" data-lucide="loader" class="hidden animate-spin"></i>
            <span id="button-text">Submit Payment Method</span>
          </button>
          <a class="button-outline" href="{% url 'my_account' %}?tab=billing">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock content %}

{% block js %}
<script>
  const clientSecret = "{{ client_secret }}";
  const redirectUrl = "{{ redirect_url }}";
</script>
{% endblock js %}

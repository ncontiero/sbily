{% extends "base.html" %}
{% load notifications %}
{% load markdown %}

{% block title %}{{ notification.title }}{% endblock title %}

{% block content %}
<div class="bg-secondary mx-auto my-16 flex max-w-xl flex-col justify-center rounded-md border-2">
  <div class="bg-background rounded-md p-6">
    <h1 class="text-lg font-bold">{{ notification.title }}</h1>
    <div class="mt-2 flex items-center gap-2 text-sm">
      <div class="flex items-center gap-1">
        <div class="size-4 [&_svg]:size-4">
          {% include "partials/notification_icon.html" %}
        </div>
        <span class="text-{{ notification.type|get_notification_color }} font-medium uppercase">
          {{ notification.get_type_display }}
        </span>
      </div>
      <div class="bg-foreground/50 size-2 rounded-full"></div>
      <span class="text-foreground/60 flex items-center">
        {{ notification.created_at|timesince }} ago
      </span>
    </div>
    <div class="separator my-6"></div>
    <div class="prose-a:link-primary prose-a:no-underline prose dark:prose-invert">
      {{ notification.content|markdown|safe }}
    </div>
    <div class="separator my-6"></div>
    <div class="flex items-center justify-between">
      <a class="button-outline px-1" href="{% url "my_notifications" %}">
        <i data-lucide="chevron-left" class="size-5 stroke-[3px]"></i>
        Go back
      </a>
      <div class="flex items-center gap-2">
        <a class="button-outline gap-2 px-1.5" href="{% url "handle_read" notification.id %}">
          <div class="size-2 rounded-full bg-blue-600"></div>
          <span>Mark as Unread</span>
        </a>
        <button
          type="button"
          data-jswc-dialog
          data-jswc-target="delete-notification-{{ notification.id }}"
          class="button-destructive gap-2 px-2"
        >
          <i data-lucide="trash2"></i>
          <span>Delete</span>
        </button>
        <div id="delete-notification-{{ notification.id }}" data-jswc-dialog-animation="true" class="dialog hidden">
          <div class="flex flex-col">
            <div class="flex items-center justify-between">
              <h2 class="text-xl font-bold">Are you sure?</h2>
            </div>
            <div class="mt-2 flex flex-col gap-4">
              <p>
                Are you sure you want to remove the "{{ notification.title }}" notification?
                This action will be permanent!
              </p>
            </div>
            <div class="mt-4 flex items-center gap-2">
              <a class="button-destructive w-full sm:w-auto" href="{% url "delete_notification" notification.id %}">
                Yes, Iâ€™m sure
              </a>
              <button
                type="button"
                data-jswc-dialog-close
                class="button-outline w-full sm:w-auto"
              >
                No, take me back
              </button>
            </div>
            <button
              type="button"
              data-jswc-dialog-close
              class="button-outline absolute top-4 right-4 rounded-xl border-0 p-2"
              aria-label="Close"
            >
              <i data-lucide="x" class="size-5"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
